<div class="row">
  <div class="col-12">
    <div class="d-flex justify-content-between align-items-center mb-2">
      <h3 class="mb-0">Lista de Productos (Tiempo Real)</h3>
      <div class="d-flex align-items-center gap-2">
        <span class="me-2">Carritos activos</span>
        <select
          id="activeCartsSelect"
          class="form-select form-select-sm"
          style="width: 250px;"
        >
          {{#each carts}}
            <option value="{{this._id}}">{{this._id}}</option>
          {{/each}}
        </select>
        <button style="border: none; background: none;" onclick="addCart()">
          <img
            src="/agregar.png"
            alt="Crear Carrito"
            style="width: 1.5rem;"
            data-bs-toggle="tooltip"
            data-bs-placement="bottom"
            title="Crear Carrito"
          />
        </button>
        <button style="border: none; background: none;" onclick="refreshCart()">
          <img
            src="/refresh.jpg"
            alt="Actualizar Carrito"
            style="width: 1.5rem;"
            data-bs-toggle="tooltip"
            data-bs-placement="bottom"
            title="Actualizar Carrito"
          />
        </button>
        <button
          style="border: none; background: none;"
          onclick="verDetalleCarrito()"
        >
          <img
            src="/lupa.png"
            alt="Ver detalle Carrito"
            style="width: 1.5rem;"
            data-bs-toggle="tooltip"
            data-bs-placement="bottom"
            title="Ver detalle Carrito"
          />
        </button>
      </div>
    </div>
  </div>
  <hr />
</div>
<div class="container mt-5">
  {{#if product}}
    <div class="row justify-content-center">
      <div class="col-md-8">
        <div class="card shadow border-0">
          <div class="row g-0">
            <div class="col-md-5">
              {{#if product.thumbnail}}
                <img
                  src="/productos/{{product.thumbnail}}"
                  class="img-fluid rounded-start"
                  alt="Imagen del producto"
                  style="background: #f5f5f5; height: 100%; object-fit: contain;"
                />

              {{else}}
                <img
                  src="/productos/sin_images.png"
                  class="img-fluid rounded-start"
                  alt="Sin imagen"
                  style="background: #f5f5f5; height: 100%; object-fit: contain;"
                />
              {{/if}}

            </div>
            <div class="col-md-7">
              <div class="card-body">
                <h3 class="card-title">{{product.title}}</h3>
                <p class="card-text">{{product.description}}</p>
                <ul class="list-unstyled mb-3">
                  <li><strong>Código:</strong> {{product.code}}</li>
                  <li><strong>Stock:</strong> {{product.stock}}</li>
                  <li><strong>Categoría:</strong> {{product.category}}</li>
                </ul>
                <h4 class="text-success">${{product.price}}</h4>
                <a href="/" class="btn btn-secondary mt-3">Volver</a>
                <button
                  class="btn btn-light btn-sm position-absolute"
                  style="bottom: 12px;"
                  title="Agregar al carrito"
                  onclick="addToCart('{{product._id}}')"
                >
                  <img
                    src="/carrito.png"
                    alt="Agregar al carrito"
                    style="width: 2.4rem;  "
                    data-bs-toggle="tooltip"
                    data-bs-placement="bottom"
                    title="Agregar al carrito"
                  />
                </button>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  {{else}}
    <div class="alert alert-danger text-center">Producto no encontrado</div>
    <a href="/" class="btn btn-secondary">Volver</a>
  {{/if}}
</div>
<script src="/js/refreshCart.js"></script>
<script src="/js/addCart.js"></script>
<script src="/js/addToCart.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () { var
  tooltipTriggerList =
  [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
  tooltipTriggerList.forEach(function (tooltipTriggerEl) { new
  bootstrap.Tooltip(tooltipTriggerEl); }); });
</script>
<script src="/js/verDetalleCarrito.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () { var
  tooltipTriggerList =
  [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
  tooltipTriggerList.forEach(function (tooltipTriggerEl) { new
  bootstrap.Tooltip(tooltipTriggerEl); }); });
</script>